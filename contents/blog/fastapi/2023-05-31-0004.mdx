---
title: 'Limiterë¥¼ í†µí•´ Throttling ì²˜ë¦¬'
authors: [jake]
tags: [python, fastapi, limiter, throttling]
---

## â­ í‚¤ì›Œë“œ

| í‚¤ì›Œë“œ | ì„¤ëª… |
| --- | --- |
| limiter | Requestë¥¼ ì›í•˜ëŠ”ëŒ€ë¡œ ì œí•œ |

## ğŸ¥ ì˜ˆì‹œ(ìƒì„±)

```python
from slowapi import Limiter
from slowapi.util import get_remote_address

from project.core.caches import limiter_cache_url

class BaseLimiter:
    """
    ë¦¬ë¯¸í„° ìƒì„±
    """
    def __init__(self):
        self.key_func = get_remote_address
        self.storage_uri = limiter_cache_url

    @property
    def init(self):
        return Limiter(
            key_func=self.key_func,
            storage_uri=self.storage_uri,
            default_limits=["1/second"],
        )

# ë¦¬ë¯¸í„° ìƒì„±
limiter = BaseLimiter()
```

## ğŸ¥ ì˜ˆì‹œ(ì‚¬ìš©)

```python
from project.core.throttling import limiter

# ë¦¬ë¯¸í„°
limiter = limiter.init

# ë¼ìš°í„°
router_v1 = APIRouter()

@router_v1.get('/')
@limiter.limit("1/second")
def api(
        request: Request,
        *,
        db: Session = Depends(get_db),
):
    return {}
```