---
title: 'GORM ì˜ˆì‹œ(ê´€ê³„ì„± ë°ì´í„° ì¡°íšŒ)'
authors: [ jake ]
tags: [ go, db, gorm ]
---

## ğŸ¥ ì˜ˆì‹œ - ë¸Œëœë“œë³„ ë§¤ì¥ ì •ë³´ì™€ ìœ„ì¹˜

```python
package server

import (
	"github.com/google/uuid"
	"gorm.io/gorm"
	"time"
)

// Brand ë¸Œëœë“œ
type Brand struct {
	gorm.Model
	Name   string `gorm:"not null;type:varchar(50)" json:"name"`
	Stores []Store
}

// Store ë§¤ì¥
type Store struct {
	gorm.Model
	BrandId  uint   `gorm:"foreignKey:ID"`
	Brand    Brand  `gorm:"constraint:OnDelete:CASCADE;" json:"brand"`
	Name     string `gorm:"not null;type:varchar(50)" json:"name"`
	Forms    []StoreForm
	Location StoreLocation
}

// StoreLocation ë§¤ì¥ ìœ„ì¹˜
type StoreLocation struct {
	gorm.Model
	StoreId   uint
	Latitude  string `gorm:"null" json:"latitude"`
	Longitude string `gorm:"null" json:"longitude"`
	IsActive  bool   `gorm:"default:false"`
}

// StoreForm ìŠ¤í† ì–´ ì‘ì„± ì–‘ì‹
type StoreForm struct {
	gorm.Model
	StoreId  uint   `gorm:"foreignKey:ID"`
	Store    Store  `gorm:"constraint:OnDelete:CASCADE;" json:"store"`
	Key      string `gorm:"not null;type:varchar(50)" json:"key"`
	Type     string `gorm:"not null;type:varchar(50)" json:"type"`
	Required bool   `gorm:"default:false" json:"required"`
	IsActive bool   `gorm:"default:true" json:"is_active"`
}
```

## ğŸ¥ ì˜ˆì‹œ - ë°ì´í„° ì¡°íšŒ

```python
tx.Preload("Brand").Preload("Forms", func(tx *gorm.DB) *gorm.DB {
	return tx.Where("is_active = ?", true)
}).Preload("Location").Where("id = ?", storeId).First(&storeObj)
if storeObj.ID == 0 {
	return c.Render("error", fiber.Map{})
}
```