---
title: 'ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—… ë° ë³µêµ¬, Python ì •ê¸°ì  ë°±ì—… ì˜ˆì‹œ'
authors: [ jake ]
tags: [ rdbms, python, db ]
---

## â­ í‚¤ì›Œë“œ

| í‚¤ì›Œë“œ    | ì„¤ëª…                     |
|--------|------------------------|
| Backup | ë°ì´í„°ë² ì´ìŠ¤ ìë£Œë¥¼ ë°±ì—…í•˜ì—¬ ê´€ë¦¬     |
| Reset  | ë°±ì—…ëœ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë°ì´í„°ë² ì´ìŠ¤ì— ì ìš© |

## ğŸ¥ ì˜ˆì‹œ(ë°±ì—…)

```python
mysqldump -u{ê³„ì •} -p{íŒ¨ìŠ¤ì›Œë“œ} {ë°ì´í„°ë² ì´ìŠ¤ëª…} > {íŒŒì¼ëª…}.sql
# íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…

mysql -u{ê³„ì •} -p{íŒ¨ìŠ¤ì›Œë“œ} --all-databases > {íŒŒì¼ëª…}.sql
# ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ë°±ì—…

mysqldump -u{ê³„ì •} -p{íŒ¨ìŠ¤ì›Œë“œ} --default-character-set=utf8 {ë°ì´í„°ë² ì´ìŠ¤} > {íŒŒì¼ëª…}.sql
# ìºë¦­í„°ì…‹ ì„¤ì •í•˜ì—¬ ë°±ì—…

mysqldump -u{ê³„ì •} -p{íŒ¨ìŠ¤ì›Œë“œ} -B {ë°ì´í„°ë² ì´ìŠ¤ëª…} --tables {í…Œì´ë¸”1} {í…Œì´ë¸”2} ... > {íŒŒì¼ëª…}.sql
# íŠ¹ì • í…Œì´ë¸” ë°±ì—…

mysqldump -u{ê³„ì •} -p{íŒ¨ìŠ¤ì›Œë“œ} --no-data {ë°ì´í„°ë² ì´ìŠ¤ëª…} > {íŒŒì¼ëª…}.sql
# í…Œì´ë¸” êµ¬ì¡°ë§Œ ë°±ì—…
```

## ğŸ¥ ì˜ˆì‹œ(ë³µì›)

```python
mysql -u{ê³„ì •} -p{íŒ¨ìŠ¤ì›Œë“œ} {ë°ì´í„°ë² ì´ìŠ¤ëª…} < {íŒŒì¼ëª…}.sql
# íŠ¹ì • ë°ì´í„°ë² ì´ìŠ¤ë§Œ ë³µì›

mysql -u{ê³„ì •} -p{íŒ¨ìŠ¤ì›Œë“œ} < {íŒŒì¼ëª…}.sql
# ì „ì²´ ë°ì´í„°ë² ì´ìŠ¤ ë³µì›
```

## ğŸ¥ ì˜ˆì‹œ(ëª¨ë“  í…Œì´ë¸” ì‚­ì œ)

```python
# ì´ê±´ ê¼­!!! í™•ì¸ í›„ ì‹¤í–‰í•´ì£¼ì„¸ìš”
# DBì´ë¦„ ì…ë ¥ë€ì—ë§Œ ì‘ì„±

SET @tables = NULL;
SELECT GROUP_CONCAT(table_schema, '.', table_name) INTO @tables
  FROM information_schema.tables
  WHERE table_schema = 'DBì´ë¦„ ì…ë ¥'; -- specify DB name here.

SET @tables = CONCAT('DROP TABLE ', @tables);
PREPARE stmt FROM @tables;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;
```

## ğŸ¥ ì˜ˆì‹œ(íŒŒì´ì¬ ìŠ¤í¬ë¦½íŠ¸)

```python
import os, datetime
userid = ""
passwd = ""
database = ""
enc = "utf8"
def dumpdb():
    today = datetime.date.today().strftime("%Y%m%d")
    command = []
    command.append("mysqldump")
    command.append("-u%s" % userid)
    command.append("-p%s" % passwd)
    command.append("--default-character-set=%s" % enc)
    command.append("--extended-insert=FALSE")
    command.append("%s > ./%s_%s.sql" % (database, database, today))
    command = " ".join(command)
    os.system(command)
if __name__=="__main__":
    dumpdb()
```