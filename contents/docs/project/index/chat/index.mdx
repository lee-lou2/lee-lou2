---
title: ChatGPT
sidebar_label: ì±—GPT
description: ChatGPT ë¥¼ ë‹¤ë£¨ëŠ” ë‹¤ì–‘í•œ ë°©ë²•
sidebar_position: 3
---

import TestChatGPT from './src/chat'

# ğŸ’¬ ChatGPT

:::tip
ChatGPT **API** ë¬´ë£Œë¡œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
:::

## SSE ë¥¼ ì´ìš©í•œ ChatGPT(ë¬´ë£Œ) ìŠ¬ë™ ì±—ë´‡ ë§Œë“¤ê¸°

### 1. ìŠ¬ë™ë´‡(ì†Œì¼“ ëª¨ë“œ) ì‹¤í–‰
```go
// SocketModeSlackBot ìŠ¬ë™ ë´‡
func SocketModeSlackBot(messageFunction func(string) (string, error), configs ...Configs) error {
	cfg, err := setConfigs(configs...)
	if err != nil {
		return err
	}
	api := slack.New(cfg.BotToken, slack.OptionAppLevelToken(cfg.AppToken))
	client := socketmode.New(api)
	// ë´‡ ìì‹ ì˜ ID ê°€ì ¸ì˜¤ê¸°
	botInfo, err := api.AuthTest()
	if err != nil {
		log.Fatalf("ë´‡ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: %v", err)
	}
	botID := botInfo.UserID

	// ì²˜ë¦¬ ì¤‘ì¸ ë©”ì‹œì§€ ì¶”ì ì„ ìœ„í•œ ë§µê³¼ ë®¤í…ìŠ¤ ìƒì„±
	var processingMessages sync.Map

	go func() {
		for evt := range client.Events {
			switch evt.Type {
			case socketmode.EventTypeEventsAPI:
				eventsAPIEvent, ok := evt.Data.(slackevents.EventsAPIEvent)
				if !ok {
					fmt.Printf("ì†Œì¼“ ëª¨ë“œ ì´ë²¤íŠ¸ê°€ ì•„ë‹™ë‹ˆë‹¤: %v\n", evt)
					continue
				}

				if eventsAPIEvent.Type == slackevents.CallbackEvent {
					innerEvent := eventsAPIEvent.InnerEvent
					switch ev := innerEvent.Data.(type) {
					case *slackevents.MessageEvent:
						// ë´‡ì´ ì‘ì„±í•œ ë©”ì‹œì§€ëŠ” ì²˜ë¦¬í•˜ì§€ ì•ŠìŒ
						if ev.User == botID {
							continue
						}

						// ì´ë¯¸ ì²˜ë¦¬ ì¤‘ì¸ ë©”ì‹œì§€ëŠ” ê±´ë„ˆëœ€
						if _, isProcessing := processingMessages.LoadOrStore(ev.ClientMsgID, true); isProcessing {
							continue
						}
						defer processingMessages.Delete(ev.ClientMsgID)

						channelID := ev.Channel
						message := ev.Text

						responseMessage, _ := messageFunction(message)
						_, _, _, err := api.SendMessage(channelID, slack.MsgOptionText(responseMessage, false))
						if err != nil {
							fmt.Printf("ì‘ë‹µ ë©”ì‹œì§€ë¥¼ ë³´ë‚´ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: %v\n", err)
						}
					}
				}
			}
		}
	}()

	for {
		err := client.Run()
		if err != nil {
			log.Printf("ì†Œì¼“ ëª¨ë“œ í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰ ì¤‘ ì—ëŸ¬ ë°œìƒ: %v", err)
		}
	}
}
```

### 2. SSE, ìŠ¬ë™ API ìƒì„±
```go
ì¤€ë¹„ì¤‘
```

### 3. ë¸Œë¼ìš°ì € ì½˜ì†” ëª¨ë“œë¥¼ ì´ìš©í•´ SSE í˜¸ì¶œ
```javascript
ì¤€ë¹„ì¤‘
```


## ChatGPT API ì˜ˆì‹œ(Golang)

```go
package main

import (
	"context"
	"fmt"
	openai "github.com/sashabaranov/go-openai"
)

func main() {
	client := openai.NewClient("your token")
	resp, err := client.CreateChatCompletion(
		context.Background(),
		openai.ChatCompletionRequest{
			Model: openai.GPT3Dot5Turbo,
			Messages: []openai.ChatCompletionMessage{
				{
					Role:    openai.ChatMessageRoleUser,
					Content: "Hello!",
				},
			},
		},
	)

	if err != nil {
		fmt.Printf("ChatCompletion error: %v\n", err)
		return
	}

	fmt.Println(resp.Choices[0].Message.Content)
}
```

<TestChatGPT></TestChatGPT>

